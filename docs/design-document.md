# What-to-Eat 设计文档

## 1. 项目简介

**What-to-Eat** 是一款帮助用户解决"今天吃什么"困扰的智能饮食助手应用。通过AI技术分析用户的饮食习惯，提供个性化的饮食建议和健康评估，让用户能够轻松做出健康的饮食选择。

### 1.1 项目目标
- 解决用户每日饮食选择的困扰
- 提供基于AI的饮食健康分析
- 给出个性化的饮食建议
- 帮助用户养成健康的饮食习惯

## 2. 核心功能

### 2.1 今日推荐
- **随机推荐**：当用户不知道吃什么时，随机推荐菜品
- **个性化推荐**：基于用户历史饮食记录和偏好，推荐合适的菜品
- **分类浏览**：按菜系、口味、食材等分类浏览可选菜品

### 2.2 饮食记录
- **记录功能**：用户可以记录每日三餐及加餐
- **拍照识别**：支持拍照识别菜品，自动记录
- **手动输入**：支持手动输入菜品名称和详细信息
- **历史记录**：查看历史饮食记录，支持按日期、类型筛选

### 2.3 AI健康分析
- **营养分析**：分析每日摄入的营养成分（蛋白质、脂肪、碳水化合物、维生素等）
- **健康评分**：基于饮食记录给出健康评分
- **问题识别**：识别饮食中的不健康因素（如高油、高盐、营养不均衡等）
- **趋势分析**：分析长期饮食趋势，识别改善空间

### 2.4 饮食建议
- **个性化建议**：基于用户的身体状况、饮食习惯和目标，提供个性化建议
- **营养补充建议**：识别营养缺失，推荐补充方案
- **菜品推荐**：根据健康分析结果，推荐更健康的替代菜品
- **食谱推荐**：提供健康食谱和制作方法

### 2.5 用户管理
- **个人资料**：身高、体重、年龄、性别等基本信息
- **健康目标**：减脂、增肌、维持健康等目标设置
- **饮食偏好**：素食、忌口、口味偏好等设置
- **数据统计**：个人饮食数据统计和可视化

## 3. 技术架构

### 3.1 系统架构
```
┌─────────────┐
│  前端应用   │ (Web/Mobile)
└──────┬──────┘
       │
┌──────▼──────┐
│  API网关    │
└──────┬──────┘
       │
┌──────▼──────┐
│  后端服务   │
│  - 业务逻辑 │
│  - 数据管理 │
└──────┬──────┘
       │
┌──────▼──────┐
│  AI服务     │
│  - 图像识别 │
│  - 营养分析 │
│  - 智能推荐 │
└──────┬──────┘
       │
┌──────▼──────┐
│  数据存储   │
│  - 用户数据 │
│  - 饮食记录 │
│  - 菜品库   │
└─────────────┘
```

### 3.2 技术栈建议

#### 前端
- **Web端**：React / Vue.js
- **移动端**：React Native / Flutter
- **UI框架**：Ant Design / Material-UI

#### 后端
- **框架**：Node.js / Python (FastAPI/Django) / Go
- **数据库**：PostgreSQL / MySQL (关系型数据)
- **缓存**：Redis (缓存和会话管理)
- **文件存储**：OSS / S3 (图片存储)

#### AI服务
- **图像识别**：使用预训练模型或第三方API（如百度AI、腾讯AI）
- **营养分析**：基于菜品数据库和营养信息库
- **推荐算法**：协同过滤、内容推荐、深度学习推荐

### 3.3 数据模型（核心）

#### 用户表 (Users)
- id, username, email, password_hash
- profile: height, weight, age, gender
- preferences: dietary_restrictions, taste_preferences
- goals: health_goals, target_calories

#### 饮食记录表 (DietRecords)
- id, user_id, date, meal_type (breakfast/lunch/dinner/snack)
- dishes: JSON数组，包含菜品信息
- images: 图片URL数组
- total_calories, nutrition_info (JSON)

#### 菜品表 (Dishes)
- id, name, category, cuisine_type
- nutrition: calories, protein, fat, carbs, vitamins
- tags: spicy, vegetarian, healthy等
- image_url, description

#### 健康分析表 (HealthAnalysis)
- id, user_id, date
- health_score, nutrition_analysis (JSON)
- issues: 识别的问题列表
- suggestions: AI生成的建议

## 4. 用户场景

### 场景1：不知道吃什么
1. 用户打开App，点击"今天吃什么"
2. 系统随机推荐或基于偏好推荐菜品
3. 用户可以选择推荐的菜品，或重新生成推荐

### 场景2：记录饮食
1. 用户用餐时拍照或手动输入
2. 系统识别菜品并记录
3. 自动计算营养成分和卡路里

### 场景3：查看健康分析
1. 用户查看今日或本周的饮食记录
2. 系统显示健康评分和营养分析
3. 展示发现的问题和改进建议

### 场景4：获取饮食建议
1. 用户查看AI生成的个性化建议
2. 根据建议调整饮食计划
3. 查看推荐的健康食谱

## 5. AI功能详细说明

### 5.1 图像识别
- **输入**：用户拍摄的菜品照片
- **输出**：菜品名称、主要食材、预估分量
- **技术**：使用深度学习模型进行图像分类和目标检测

### 5.2 营养分析
- **数据源**：菜品营养数据库
- **分析方法**：
  - 计算每日总卡路里
  - 分析宏量营养素（蛋白质、脂肪、碳水化合物）
  - 分析微量营养素（维生素、矿物质）
  - 对比推荐摄入量

### 5.3 健康评分算法
- **评分维度**：
  - 营养均衡度（40%）
  - 卡路里合理性（30%）
  - 食物多样性（20%）
  - 健康食材比例（10%）
- **评分范围**：0-100分

### 5.4 智能推荐
- **推荐策略**：
  - 基于用户历史偏好
  - 考虑营养均衡
  - 结合健康目标
  - 考虑季节和地域因素

## 6. 开发计划（建议）

### 阶段1：MVP（最小可行产品）
- 基础菜品推荐功能
- 简单的饮食记录（手动输入）
- 基础的健康分析（基于卡路里和基本营养）

### 阶段2：核心功能完善
- 图像识别功能
- 完整的营养分析
- 健康评分系统
- 个性化推荐

### 阶段3：AI增强
- 深度学习推荐算法
- 更精准的图像识别
- 智能饮食建议生成
- 长期趋势分析

### 阶段4：优化和扩展
- 社交功能（分享饮食记录）
- 社区功能（用户交流）
- 商家合作（推荐附近餐厅）
- 更多健康功能（运动建议、睡眠分析等）

## 7. 数据安全与隐私

- 用户数据加密存储
- 遵循数据保护法规（如GDPR）
- 用户可随时导出或删除个人数据
- 图片数据安全存储，不用于其他用途

## 8. 未来扩展方向

- **社交化**：分享饮食记录，与朋友互动
- **商业化**：与餐厅、外卖平台合作
- **专业化**：与营养师、健康机构合作
- **智能化**：更精准的AI分析，个性化定制方案

---

**文档版本**：v1.0  
**最后更新**：2025年12月31日

